{% extends "base.html" %}
{% block title %}{{ action }}…{% endblock %}
{% block content %}
  <h2>{{ action }} birthdays…</h2>
  <progress id="bar" max="100" value="0"></progress>
  <span id="pct">0%</span>
  <script>
    function update(p){
      document.getElementById('bar').value=p;
      document.getElementById('pct').innerText=p+'%';
    }
    function finished(msg){
      document.getElementById('pct').innerText=msg;
      const btn=document.createElement('button');
      btn.textContent='Back to Home';
      btn.onclick=()=>location.href='{{ url_for("index") }}';
      btn.className='btn btn-secondary mt-3';
      document.querySelector('main').appendChild(btn);
    }
  </script>
  <!-- the view will stream update() and finished() calls here -->
{% endblock %}
